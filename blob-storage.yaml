# Authentication Header Parameters:
#   see https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/authentication-for-the-azure-storage-services
# - $ref : "#/parameters/Authorization" --  Specifies the authentication scheme, account name, and signature. 
# - $ref : "#/parameters/Date" Specifies the Coordinated Universal Time (UTC) for the request

swagger: '2.0'
info:
  title: Azure Storage
  version: 1.0.0
  x-ms-code-generation-settings:
    header: MIT
    strictSpecAdherence: false
x-ms-parameterized-host:
  hostTemplate: "{accountName}.blob.core.windows.net"
  positionInOperation: first 
  parameters:
  - name: accountName
    description: The Azure storage account to use.
    required: true
    type: string
    in: path
    x-ms-skip-url-encoding: true
schemes:
- http
consumes:
- application/xml
- application/json
- application/octet-stream
- text/plain
produces:
- application/xml
- application/json
- application/octet-stream
- text/plain
paths:
  "/{container}/{blob}":
    get:
      tags:
      - blobs
      operationId: Blobs_Get
      description: The Get Blob operation reads or downloads a blob from the system, including its metadata and properties. You can also call Get Blob to read a snapshot.
      parameters:
      - $ref: "#/parameters/Container"
      - $ref: "#/parameters/Blob"
      - $ref: "#/parameters/Snapshot"
      - $ref: "#/parameters/Timeout"

      - $ref: "#/parameters/ApiVersionParameter"  # Version
      - $ref: "#/parameters/Range"
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/GetRangeContentMD5"
      - $ref: "#/parameters/Origin"
      - $ref: "#/parameters/ClientRequestId"
      # insert authentication stuff
      responses:
        '200':
          description: Returns the content of the entire blob.
          headers:
            - $inc : '#/headers/Last-Modified'
            - $inc : "#/headers/x-ms-meta"
            - $inc : "#/headers/Content-Length"
            - $inc : "#/headers/Content-Type"
            - $inc : "#/headers/Content-Range"
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Content-MD5"
            - $inc : "#/headers/Content-Encoding"
            - $inc : "#/headers/Content-Language"
            - $inc : "#/headers/Cache-Control"
            - $inc : "#/headers/Content-Disposition"
            - $inc : "#/headers/x-ms-blob-sequence-number"
            - $inc : "#/headers/x-ms-blob-type"
            - $inc : "#/headers/x-ms-copy-completion-time"
            - $inc : "#/headers/x-ms-copy-status-description"
            - $inc : "#/headers/x-ms-copy-id"
            - $inc : "#/headers/x-ms-copy-progress"
            - $inc : "#/headers/x-ms-copy-source"
            - $inc : "#/headers/x-ms-copy-status"
            - $inc : "#/headers/x-ms-lease-duration"
            - $inc : "#/headers/x-ms-lease-state"
            - $inc : "#/headers/x-ms-lease-status"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Accept-Ranges"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/Access-Control-Allow-Origin"
            - $inc : "#/headers/Access-Control-Expose-Headers"
            - $inc : "#/headers/Vary"
            - $inc : "#/headers/Access-Control-Allow-Credentials"
            - $inc : "#/headers/x-ms-blob-committed-block-count"
            - $inc : "#/headers/x-ms-server-encrypted"
            - $inc : "#/headers/x-ms-blob-content-md5"
          schema:
            type: file
        '206':
          description: Returns the content of a specified range of the blob.
          headers:
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-meta"
            - $inc : "#/headers/Content-Length"
            - $inc : "#/headers/Content-Type"
            - $inc : "#/headers/Content-Range"
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Content-MD5"
            - $inc : "#/headers/Content-Encoding"
            - $inc : "#/headers/Content-Language"
            - $inc : "#/headers/Cache-Control"
            - $inc : "#/headers/Content-Disposition"
            - $inc : "#/headers/x-ms-blob-sequence-number"
            - $inc : "#/headers/x-ms-blob-type"
            - $inc : "#/headers/x-ms-copy-completion-time"
            - $inc : "#/headers/x-ms-copy-status-description"
            - $inc : "#/headers/x-ms-copy-id"
            - $inc : "#/headers/x-ms-copy-progress"
            - $inc : "#/headers/x-ms-copy-source"
            - $inc : "#/headers/x-ms-copy-status"
            - $inc : "#/headers/x-ms-lease-duration"
            - $inc : "#/headers/x-ms-lease-state"
            - $inc : "#/headers/x-ms-lease-status"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Accept-Ranges"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/Access-Control-Allow-Origin"
            - $inc : "#/headers/Access-Control-Expose-Headers"
            - $inc : "#/headers/Vary"
            - $inc : "#/headers/Access-Control-Allow-Credentials"
            - $inc : "#/headers/x-ms-blob-committed-block-count"
            - $inc : "#/headers/x-ms-server-encrypted"
            - $inc : "#/headers/x-ms-blob-content-md5"
          schema:
            type: file
        default:
          $ref: "#/responses/Error"
    head:
      tags:
      - blobs
      operationId: Blobs_GetProperties
      description: The Get Blob Properties operation returns all user-defined metadata, standard HTTP properties, and system properties for the blob. It does not return the content of the blob.
      parameters:
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        - $ref: "#/parameters/Snapshot"
        - $ref: "#/parameters/Timeout"

        - $ref: "#/parameters/ApiVersionParameter"  # Version
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        '200':
          description: Returns the properties of the blob.
          headers:
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-meta"
            - $inc : "#/headers/x-ms-blob-type"
            - $inc : "#/headers/x-ms-copy-completion-time"
            - $inc : "#/headers/x-ms-copy-status-description"
            - $inc : "#/headers/x-ms-copy-id"
            - $inc : "#/headers/x-ms-copy-progress"
            - $inc : "#/headers/x-ms-copy-source"
            - $inc : "#/headers/x-ms-copy-status"
            - $inc : "#/headers/x-ms-incremental-copy"
            - $inc : "#/headers/x-ms-lease-duration"
            - $inc : "#/headers/x-ms-lease-state"
            - $inc : "#/headers/x-ms-lease-status"
            - $inc : "#/headers/Content-Length"
            - $inc : "#/headers/Content-Type"
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Content-MD5"
            - $inc : "#/headers/Content-Encoding"
            - $inc : "#/headers/Content-Language"
            - $inc : "#/headers/Content-Disposition"
            - $inc : "#/headers/Cache-Control"
            - $inc : "#/headers/x-ms-blob-sequence-number"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/Accept-Ranges"
            - $inc : "#/headers/x-ms-blob-committed-block-count"
            - $inc : "#/headers/x-ms-server-encrypted"
    delete:
      tags:
      - blobs
      operationId: Blobs_Delete
      description: The Delete Blob operation marks the specified blob or snapshot for deletion. The blob is later deleted during garbage collection.
        Note that in order to delete a blob, you must delete all of its snapshots. You can delete both at the same time with the Delete Blob operation.
      parameters:
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        - $ref: "#/parameters/Snapshot"
        - $ref: "#/parameters/Timeout"
        
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/DeleteSnapshots"
        - $ref: "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        '202':
          description: The delete request was accepted and the blob will be deleted.
          headers:
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
        default:
          $ref: "#/responses/Error"
    put:
      tags:
      - blobs
      operationId: Blobs_Put
      description: The Put Blob operation creates a new block, page, or append blob, or updates the content of an existing block blob.
        Updating an existing block blob overwrites any existing metadata on the blob. Partial updates are not supported with Put Blob; the content of the existing blob is overwritten with the content of the new blob. To perform a partial update of the content of a block blob, use the Put Block List operation.
      parameters:
        # Authentication Parameters.
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        - $ref: "#/parameters/Timeout"
        
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/ContentLength"
        - $ref: "#/parameters/ContentType"
        - $ref: "#/parameters/ContentEncoding"
        - $ref: "#/parameters/ContentLanguage"
        - $ref: "#/parameters/ContentMD5"
        - $ref: "#/parameters/CacheControl"
        - $ref: "#/parameters/BlobContentType"
        - $ref: "#/parameters/BlobContentEncoding"
        - $ref: "#/parameters/BlobContentLanguage"
        - $ref: "#/parameters/BlobContentMD5"
        - $ref: "#/parameters/BlobCacheControl"
        - $ref: "#/parameters/BlobType"
        - $ref: "#/parameters/Metadata"
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/BlobContentDisposition"
        - $ref: "#/parameters/Origin"
        - $ref: "#/parameters/ClientRequestId"
        # page blobs only
        - $ref: "#/parameters/BlobContentLength"
        - $ref: "#/parameters/BlobSequenceNumber"

        # block blob only
        - $ref: "#/parameters/Body"
      responses:
        '202':
          description: The delete request was accepted and the blob will be deleted.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/Content-MD5"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/Access-Control-Allow-Origin"
            - $inc : "#/headers/Access-Control-Expose-Headers"
            - $inc : "#/headers/Access-Control-Allow-Credentials"
            - $inc : "#/headers/x-ms-request-server-encrypted"
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?comp=properties":
    head:
      tags:
      - blobs
      operationId: Blobs_GetProperties
      description: The Get Blob Properties operation returns all user-defined metadata, standard HTTP properties, and system properties for the blob. It does not return the content of the blob
      parameters:
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        
        - $inc: "#/parameters/_QueryComp"
          enum:
          - properties
        - $ref: "#/parameters/Snapshot"
        - $ref: "#/parameters/Timeout"
        
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        '200':
          description: The properties were retrieved successfully.
          headers:
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-meta"
            - $inc : "#/headers/x-ms-blob-type"
            - $inc : "#/headers/x-ms-copy-completion-time"
            - $inc : "#/headers/x-ms-copy-status-description"
            - $inc : "#/headers/x-ms-copy-id"
            - $inc : "#/headers/x-ms-copy-progress"
            - $inc : "#/headers/x-ms-copy-source"
            - $inc : "#/headers/x-ms-copy-status"
            - $inc : "#/headers/x-ms-incremental-copy"
            - $inc : "#/headers/x-ms-copy-destination-snapshot"
            - $inc : "#/headers/x-ms-lease-duration"
            - $inc : "#/headers/x-ms-lease-state"
            - $inc : "#/headers/x-ms-lease-status"
            - $inc : "#/headers/Content-Length"
            - $inc : "#/headers/Content-Type"
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Content-MD5"
            - $inc : "#/headers/Content-Encoding"
            - $inc : "#/headers/Content-Language"
            - $inc : "#/headers/Content-Disposition"
            - $inc : "#/headers/Cache-Control"
            - $inc : "#/headers/x-ms-blob-sequence-number"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/Accept-Ranges"
            - $inc : "#/headers/x-ms-blob-committed-block-count"
            - $inc : "#/headers/x-ms-server-encrypted"
        default:
          $ref: "#/responses/Error"
    put:
      tags:
      - blobs
      operationId: Blobs_SetProperties
      description: The Set Blob Properties operation sets system properties on the blob
      parameters:
        # Authentication Parameters.
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        
        - $inc: "#/parameters/_QueryComp"
          enum:
          - properties
        - $ref: "#/parameters/Timeout"
        
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/BlobCacheControl"
        - $ref: "#/parameters/BlobContentType"
        - $ref: "#/parameters/BlobContentMD5"
        - $ref: "#/parameters/BlobContentEncoding"
        - $ref: "#/parameters/BlobContentLanguage"
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/ClientRequestId"
        - $ref: "#/parameters/BlobContentDisposition"
        - $ref: "#/parameters/Origin"
        # page blobs only (TODO: split out into separate function?)
        - $ref: "#/parameters/BlobContentLength"
        - $ref: "#/parameters/SequenceNumberAction"
        - $ref: "#/parameters/BlobSequenceNumber"
      responses:
        '200':
          description: The properties were set successfully.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-blobs-sequence-number"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/Access-Control-Allow-Origin"
            - $inc : "#/headers/Access-Control-Expose-Headers"
            - $inc : "#/headers/Access-Control-Allow-Credentials"
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?comp=metadata":
    head:
      tags:
      - blobs
      operationId: Blobs_GetMetadata
      description: The Get Blob Metadata operation returns all user-defined metadata for the specified blob or snapshot
      parameters:
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        
        - $inc: "#/parameters/_QueryComp"
          enum:
          - metadata
        - $ref: "#/parameters/Snapshot"
        - $ref: "#/parameters/Timeout"
        
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        '200':
          description: The metadata was retrieved successfully.
          headers:
            - $inc : "#/headers/x-ms-meta"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
        default:
          $ref: "#/responses/Error"
    put:
      tags:
      - blobs
      operationId: Blobs_SetMetadata
      description: The Set Blob Metadata operation sets user-defined metadata for the specified blob as one or more name-value pairs
      parameters:
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        
        - $inc: "#/parameters/_QueryComp"
          enum:
          - metadata
        - $ref: "#/parameters/Timeout"
        
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/Metadata"
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        '200':
          description: The metadata was set successfully.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/x-ms-request-server-encrypted"
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?comp=lease":
    put:
      tags:
      - blobs
      operationId: Blobs_Lease # TODO: split into per lease action operations? (enables more precise modeling)
      description: The Lease Blob operation establishes and manages a lock on a blob for write and delete operations
      parameters:
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        
        - $inc: "#/parameters/_QueryComp"
          enum:
          - lease
        - $ref: "#/parameters/Timeout"
        
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/LeaseAction"
        - $ref: "#/parameters/LeaseBreakPeriod"
        - $ref: "#/parameters/LeaseDuration"
        - $ref: "#/parameters/ProposedLeaseId"
        - $ref: "#/parameters/Origin"
        - $ref: "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        '200':
          description: The Renew/Change/Release operation completed successfully.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-lease-id"
            - $inc : "#/headers/x-ms-lease-time"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/Access-Control-Flow-Origin"
            - $inc : "#/headers/Access-Control-Expose-Headers"
            - $inc : "#/headers/Access-Control-Allow-Credentials"
        '201':
          description: The Acquire operation completed successfully.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-lease-id"
            - $inc : "#/headers/x-ms-lease-time"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/Access-Control-Flow-Origin"
            - $inc : "#/headers/Access-Control-Expose-Headers"
            - $inc : "#/headers/Access-Control-Allow-Credentials"
        '202':
          description: The Release operation completed successfully.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-lease-id"
            - $inc : "#/headers/x-ms-lease-time"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/Access-Control-Flow-Origin"
            - $inc : "#/headers/Access-Control-Expose-Headers"
            - $inc : "#/headers/Access-Control-Allow-Credentials"
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?comp=snapshot":
    put:
      tags:
      - blobs
      operationId: Blobs_TakeSnapshot
      description: The Snapshot Blob operation creates a read-only snapshot of a blob
      parameters:
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        
        - $inc: "#/parameters/_QueryComp"
          enum:
          - snapshot
        - $ref: "#/parameters/Timeout"
        
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/Metadata"
        - $ref: "#/parameters/IfModifiedSince"
        - $ref: "#/parameters/IfUnmodifiedSince"
        - $ref: "#/parameters/IfMatch"
        - $ref: "#/parameters/IfNoneMatch"
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        '201':
          description: The snaptshot was taken successfully.
          headers:
            - $inc : "#/headers/x-ms-snapshot"
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?comp=copy":
    put:
      tags:
      - blobs
      operationId: Blobs_AbortCopy
      description: The Abort Copy Blob operation aborts a pending Copy Blob operation, and leaves a destination blob with zero length and full metadata.
      parameters:
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        
        - $inc: "#/parameters/_QueryComp"
          enum:
          - copy
        - $ref: "#/parameters/CopyId"
        - $ref: "#/parameters/Timeout"
        
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/CopyActionAbort"
        - $ref: "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        '204':
          description: The delete request was accepted and the blob will be deleted.
          headers:
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"

        default:
          $ref: "#/responses/Error"

x-ms-paths:
  "/?comp=list":
    get:
      tags:
      - service
      operationId: Service_ListContainers
      description: The List Containers operation returns a list of the containers under the specified account
      parameters:
        - $inc: "#/parameters/_QueryComp"
          enum:
          - list
        - $ref : '#/parameters/Prefix'
        - $ref : '#/parameters/Marker'
        - $ref : '#/parameters/MaxResults'
        - $ref : '#/parameters/Include'
        - $ref : '#/parameters/Timeout'
        - $ref : "#/parameters/ApiVersionParameter"  # Version
        - $ref : "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        '200':
          description: Success.
          headers:
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
          schema:
            $ref: "#/definitions/ContainerEnumerationResults"
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}":
    put:
      tags:
      - blobs
      operationId: Blobs_Copy
      description: The Copy Blob operation copies a blob to a destination within the storage account.
      parameters:
        - $ref: "#/parameters/Container"
        - $ref: "#/parameters/Blob"
        - $ref: "#/parameters/Timeout"
        
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/Metadata"
        - $ref: "#/parameters/SourceIfModifiedSince"
        - $ref: "#/parameters/SourceIfUnmodifiedSince"
        - $ref: "#/parameters/SourceIfMatch"
        - $ref: "#/parameters/SourceIfNoneMatch"
        - $ref: "#/parameters/IfModifiedSince"
        - $ref: "#/parameters/IfUnmodifiedSince"
        - $ref: "#/parameters/IfMatch"
        - $ref: "#/parameters/IfNoneMatch"
        - $ref: "#/parameters/CopySource"
        - $ref: "#/parameters/LeaseId"
        - $ref: "#/parameters/SourceLeaseId"
        - $ref: "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        '202':
          description: The delete request was accepted and the blob will be deleted.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/x-ms-copy-id"
            - $inc : "#/headers/x-ms-copy-status"
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}":
    delete:
      tags:
      - blobs
      operationId: BlockBlobs_PutBlock
      description: The Put Block operation creates a new block to be committed as part of a blob
      parameters:
      - "$ref": "#/parameters/Container"
      - "$ref": "#/parameters/Blob"

      - $inc: "#/parameters/_QueryComp"
        enum:
        - block
      - "$ref": "#/parameters/BlockId"
      - "$ref": "#/parameters/Timeout"

      - "$ref": "#/parameters/ApiVersionParameter"  # Version
      - "$ref": "#/parameters/ContentLength"
      - "$ref": "#/parameters/ContentMD5"
      - "$ref": "#/parameters/LeaseId"
      - "$ref": "#/parameters/ClientRequestId"
      # insert authentication stuff

      - name: blocks
        in: body
        required: true
        schema:
          "$ref": "#/definitions/Body"

      responses:
        '201':
          description: The block was created.
          headers:
            - $inc : "#/headers/Content-MD5"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/x-ms-request-server-encrypted"
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?comp=block":
    put:
      tags:
      - blockblobs
      operationId: BlockBlobs_PutBlock
      description: The Put Block operation creates a new block to be committed as part of a blob
      parameters:
      - "$ref": "#/parameters/Container"
      - "$ref": "#/parameters/Blob"

      - $inc: "#/parameters/_QueryComp"
        enum:
        - block
      - "$ref": "#/parameters/BlockId"
      - "$ref": "#/parameters/Timeout"

      - "$ref": "#/parameters/ApiVersionParameter"  # Version
      - "$ref": "#/parameters/ContentLength"
      - "$ref": "#/parameters/ContentMD5"
      - "$ref": "#/parameters/LeaseId"
      - "$ref": "#/parameters/ClientRequestId"
      # insert authentication stuff

      - name: blocks
        in: body
        required: true
        schema:
          "$ref": "#/definitions/Body"

      responses:
        '201':
          description: The block was created.
          headers:
            - $inc : "#/headers/Content-MD5"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/x-ms-request-server-encrypted"
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?comp=blocklist":
    put:
      tags:
      - blockblobs
      operationId: BlockBlobs_PutBlockList
      description: The Put Block List operation writes a blob by specifying the list of block IDs that make up the blob. In order to be written as part of a blob, a block must have been successfully written to the server in a prior Put Block operation.
        You can call Put Block List to update a blob by uploading only those blocks that have changed, then committing the new and existing blocks together. You can do this by specifying whether to commit a block from the committed block list or from the uncommitted block list, or to commit the most recently uploaded version of the block, whichever list it may belong to.
      parameters:
      - "$ref": "#/parameters/Container"
      - "$ref": "#/parameters/Blob"

      - $inc: "#/parameters/_QueryComp"
        enum:
        - blocklist
      - "$ref": "#/parameters/Timeout"

      - "$ref": "#/parameters/ApiVersionParameter"  # Version
      - "$ref": "#/parameters/ContentLength"
      - "$ref": "#/parameters/ContentMD5"
      - "$ref": "#/parameters/BlobCacheControl"
      - "$ref": "#/parameters/BlobContentType"
      - "$ref": "#/parameters/BlobContentEncoding"
      - "$ref": "#/parameters/BlobContentLanguage"
      - "$ref": "#/parameters/BlobContentMD5"
      - "$ref": "#/parameters/XMsMeta"
      - "$ref": "#/parameters/LeaseId"
      - "$ref": "#/parameters/ClientRequestId"
      - "$ref": "#/parameters/BlobContentDisposition"
      # insert authentication stuff

      - name: blocks
        in: body
        required: true
        schema:
          "$ref": "#/definitions/BlockLookupList"
      responses:
        '201':
          description: The block list was recorded.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/Content-MD5"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/x-ms-request-server-encrypted"
        default:
          "$ref": "#/responses/Error"
    get:
      tags:
      - blockblobs
      operationId: BlockBlobs_GetBlockList
      description: The Get Block List operation retrieves the list of blocks that have been uploaded as part of a block blob
      parameters:
      - "$ref": "#/parameters/Container"
      - "$ref": "#/parameters/Blob"

      - $inc: "#/parameters/_QueryComp"
        enum:
        - blocklist
      - "$ref": "#/parameters/Snapshot"
      - "$ref": "#/parameters/BlockListType"
      - "$ref": "#/parameters/Timeout"

      - "$ref": "#/parameters/ApiVersionParameter"  # Version
      - "$ref": "#/parameters/LeaseId"
      - "$ref": "#/parameters/ClientRequestId"
      # insert authentication stuff
      responses:
        '200':
          description: The page range was written.
          headers:
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Content-Type"
            - $inc : "#/headers/x-ms-blob-content-length"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
          schema:
            "$ref": "#/definitions/BlockList"
        default:
          "$ref": "#/responses/Error"
  "/{container}/{blob}?comp=page":
    put:
      tags:
      - pageblobs
      operationId: PageBlobs_PutPage
      description: The Put Page operation writes a range of pages to a page blob
      parameters:
      - "$ref": "#/parameters/Container"
      - "$ref": "#/parameters/Blob"

      - $inc: "#/parameters/_QueryComp"
        enum:
        - page
      - "$ref": "#/parameters/Timeout"

      - "$ref": "#/parameters/ApiVersionParameter"  # Version
      - "$ref": "#/parameters/Range"
      - "$ref": "#/parameters/ContentLength"
      - "$ref": "#/parameters/ContentMD5"
      - "$ref": "#/parameters/PageWrite"
      - "$ref": "#/parameters/LeaseId"
      - "$ref": "#/parameters/IfSequenceNumberLessThanOrEqualTo"
      - "$ref": "#/parameters/IfSequenceNumberLessThan"
      - "$ref": "#/parameters/IfSequenceNumberEqualTo"
      - "$ref": "#/parameters/IfModifiedSince"
      - "$ref": "#/parameters/IfUnmodifiedSince"
      - "$ref": "#/parameters/IfMatch"
      - "$ref": "#/parameters/IfNoneMatch"
      - "$ref": "#/parameters/ClientRequestId"

      - "$ref": "#/parameters/Body"
      # insert authentication stuff
      responses:
        '201':
          description: The page range was written.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/Content-MD5"
            - $inc : "#/headers/x-ms-blob-content-length"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/x-ms-request-server-encrypted"
        default:
          "$ref": "#/responses/Error"
  "/{container}/{blob}?comp=pagelist":
    get:
      tags:
      - pageblobs
      operationId: PageBlobs_GetPageRanges
      description: The Get Page Ranges operation returns the list of valid page ranges for a page blob or snapshot of a page blob
      parameters:
      - "$ref": "#/parameters/Container"
      - "$ref": "#/parameters/Blob"

      - $inc: "#/parameters/_QueryComp"
        enum:
        - pagelist
      - "$ref": "#/parameters/Snapshot"
      - "$ref": "#/parameters/Timeout"
      - "$ref": "#/parameters/PrevSnapshot"

      - "$ref": "#/parameters/ApiVersionParameter"  # Version
      - "$ref": "#/parameters/Range"
      - "$ref": "#/parameters/LeaseId"
      - "$ref": "#/parameters/ClientRequestId"
      # insert authentication stuff
      responses:
        '200':
          description: Information on the page blob was found.
          headers:
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/x-ms-blob-content-length"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
          schema:
            type: string
            # TODO: https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/get-page-ranges
            # has sequence toggling between PageRange and ClearRange
        default:
          "$ref": "#/responses/Error"
  "/{container}/{blob}?comp=incrementalcopy":
    put:
      tags:
      - pageblobs
      operationId: PageBlobs_IncrementalCopy
      description: The Incremental Copy Blob operation copies a snapshot of the source page blob to a destination page blob. The snapshot is copied such that only the differential changes between the previously copied snapshot are transferred to the destination. The copied snapshots are complete copies of the original snapshot and can be read or copied from as usual. This API is supported since REST version 2016-05-31.
      parameters:
      - "$ref": "#/parameters/Container"
      - "$ref": "#/parameters/Blob"

      - $inc: "#/parameters/_QueryComp"
        enum:
        - incrementalcopy
      - "$ref": "#/parameters/Timeout"

      - "$ref": "#/parameters/ApiVersionParameter"  # Version
      - "$ref": "#/parameters/Metadata"
      - "$ref": "#/parameters/IfModifiedSince"
      - "$ref": "#/parameters/IfUnmodifiedSince"
      - "$ref": "#/parameters/IfMatch"
      - "$ref": "#/parameters/IfNoneMatch"
      - "$ref": "#/parameters/CopySource"
      - "$ref": "#/parameters/ClientRequestId"
      # insert authentication stuff
      responses:
        '202':
          description: The blob was copied.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/x-ms-copy-id"
            - $inc : "#/headers/x-ms-copy-status"
        default:
          "$ref": "#/responses/Error"

  "/{container}/{blob}?comp=appendblock":
    put:
      tags:
      - blobs
      operationId: Blobs_AppendBlock
      description: The Append Block operation commits a new block of data to the end of an existing append blob.
        The Append Block operation is permitted only if the blob was created with x-ms-blob-type set to AppendBlob. Append Block is supported only on version 2015-02-21 version or later.
      parameters:
      - "$ref": "#/parameters/Container"
      - "$ref": "#/parameters/Blob"

      - $inc: "#/parameters/_QueryComp"
        enum:
        - appendblock
      - "$ref": "#/parameters/Timeout"

      - "$ref": "#/parameters/ApiVersionParameter"  # Version
      - "$ref": "#/parameters/Content-Length"
      - "$ref": "#/parameters/Content-MD5"
      - "$ref": "#/parameters/LeaseId"
      - "$ref": "#/parameters/ClientRequestId"
      - "$ref": "#/parameters/BlobConditionMaxSize"
      - "$ref": "#/parameters/BlobConditionAppendPos"

      - "$ref": "#/parameters/Body"
      # insert authentication stuff
      responses:
        '201':
          description: The block was created.
          headers:
            - $inc : "#/headers/ETag"
            - $inc : "#/headers/Last-Modified"
            - $inc : "#/headers/Content-MD5"
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : "#/headers/Date"
            - $inc : "#/headers/x-ms-blob-append-offset"
            - $inc : "#/headers/x-ms-blob-committed-block-count"
        default:
          "$ref": "#/responses/Error"

  "/?restype=service&comp=properties":
    put:
      tags:
        - service
      operationId: Service_SetProperties
      description: Sets properties for a storage account’s Blob service endpoint, including properties for Storage Analytics and CORS (Cross-Origin Resource Sharing) rules
      parameters:
        - $inc: "#/parameters/_ResType"
          enum:
            - service
        - $inc: "#/parameters/_QueryComp"
          enum:
            - properties
        - $ref : "#/parameters/StorageServiceProperties"
        - $ref : '#/parameters/Timeout'
        - $ref : "#/parameters/ApiVersionParameter"  # Version
        - $ref : "#/parameters/ClientRequestId"
        # Authentication Parameters.
      responses:
        202:
          description: Success (Accepted)
          headers:
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
        default:
          $ref: "#/responses/Error"

    get:
      tags:
        - service
      operationId: Service_GetProperties
      description: gets the properties of a storage account’s Blob service, including properties for Storage Analytics and CORS (Cross-Origin Resource Sharing) rules.
      parameters:
        - $inc: "#/parameters/_ResType"
          enum:
            - service
        - $inc: "#/parameters/_QueryComp"
          enum:
            - properties
        - $ref: '#/parameters/Timeout'
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/ClientRequestId"
      responses:
        '200':
          description: Success.
          headers:
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
          schema:
            $ref: "#/definitions/StorageServiceProperties"
        default:
          $ref: "#/responses/Error"

  "/?restype=service&comp=properties":
    get:
      tags: 
        - service
      operationId: Service_GetStats
      description: Retrieves statistics related to replication for the Blob service. It is only available on the secondary location endpoint when read-access geo-redundant replication is enabled for the storage account. 
      parameters:
        - $inc: "#/parameters/_ResType"
          enum:
            - service
        - $inc: "#/parameters/_QueryComp"
          enum:
            - stats
        - $ref: '#/parameters/Timeout'
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/ClientRequestId"
      responses:
        200:
          description: Success.
          headers:
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : '#/headers/Date'
          schema:
            $ref: '#/definitions/StorageServiceStats'
  
  "{container}?restype=container":
    put:
      tags: 
        - container
      operationId: Container_Create
      description: creates a new container under the specified account. If the container with the same name already exists, the operation fails
      parameters:
        - "$ref": "#/parameters/Container"
        - $inc: "#/parameters/_ResType"
          enum:
            - container
        - $ref: '#/parameters/Timeout'
        - $ref: '#/parameters/Metadata'
        - $ref: '#/parameters/BlobPublicAccess'
        - $ref: "#/parameters/ApiVersionParameter"
        - $ref: "#/parameters/ClientRequestId"
      responses:
        201: 
          description: Success, Container created.
          headers:
            - $inc : '#/headers/ETag'
            - $inc : '#/headers/Last-Modified'
            - $inc : "#/headers/x-ms-request-id"
            - $inc : "#/headers/x-ms-version"
            - $inc : '#/headers/Date'


# 
definitions:
  Block:
    type: object
    properties:
      name:
        description: The base64 encoded block ID
        type: string
        xml:
          name: Name
      size:
        description: The block size in bytes
        type: integer
        xml:
          name: Size

  BlockList:
    type: object
    properties:
      CommittedBlocks:
        type: array
        items:
          "$ref": "#/definitions/Block"
          xml:
            name: Block
        xml:
          wrapped: true
      UncommittedBlocks:
        type: array
        items:
          "$ref": "#/definitions/Block"
          xml:
            name: Block
        xml:
          wrapped: true

  BlockLookup:
    type: object
    properties:
      State:
        $ref: "#/definitions/BlockListType"
      Id:
        type: string

  BlockLookupList:
    type: array
    x-ms-external: true
    xml:
      name: BlockList,
      wrapped: true
    items:
      $ref: "#/definitions/Block"
      # weird dependent tag name and value
      
  # Enums ========================================================================
  BlobType:
    type: string
    enum:
    - BlockBlob
    - PageBlob
    - AppendBlob
    x-ms-enum:
      name: BlobType
      modelAsString: false

  BlockListType:
    type: string
    enum:
      - committed
      - uncomitted
      - all
    x-ms-enum:
      name: BlockListType
      modelAsString: false
  
  BlobPublicAccessType:
    type: string
    enum:
      - container
      - blob
    x-ms-enum:
      name: BlobPublicAccessType
      modelAsString: false

  CopyStatus:
    type: string
    enum:
      - pending
      - success
      - aborted
      - failed
    x-ms-enum:
      name: CopyStatusType
      modelAsString: false

  DeleteSnapshots:
    type: string
    enum: 
      - include
      - only
    x-ms-enum:
      name: DeleteSnapshotsOption
      modelAsString: false
  
  GeoReplicationStatus:
    type: string
    enum:
      - live
      - bootstrap
      - unavailable
    x-ms-enum:
      name: GeoReplicationStatus
      modelAsString: false

  LeaseDuration:
    type: string
    enum:
      - infinite
      - fixed
    x-ms-enum:
      name: LeaseDurationType
      modelAsString: false

  LeaseState:
    type: string
    enum:
      - available
      - leased
      - expired
      - breaking
      - broken
    x-ms-enum:
      name: LeaseStateType
      modelAsString: false

  LeaseStatus:
    type: string
    enum:
      - locked
      - unlocked
    x-ms-enum:
      name: LeaseStatusType
      modelAsString: false

  # Objects ========================================================================
  CorsRule:
    description: CORS is an HTTP feature that enables a web application running under one domain to access resources in another domain. Web browsers implement a security restriction known as same-origin policy that prevents a web page from calling APIs in a different domain; CORS provides a secure way to allow one domain (the origin domain) to call APIs in another domain
    type: object
    required:
      - AllowedOrigins
      - AllowedMethods
      - AllowedHeaders
      - ExposedHeaders
      - MaxAgeInSeconds
    properties:
      AllowedOrigins:
        description:  The origin domains that are permitted to make a request against the storage service via CORS. The origin domain is the domain from which the request originates. Note that the origin must be an exact case-sensitive match with the origin that the user age sends to the service. You can also use the wildcard character '*' to allow all origin domains to make requests via CORS. 
        type: string
      AllowedMethods:
        description:  The methods (HTTP request verbs) that the origin domain may use for a CORS request. (comma separated)
        type: string
      AllowedHeaders:
        description: the request headers that the origin domain may specify on the CORS request.
        type: string
      ExposedHeaders:
        description: The response headers that may be sent in the response to the CORS request and exposed by the browser to the request issuer
        type: string
      MaxAgeInSeconds: 
        description: The maximum amount time that a browser should cache the preflight OPTIONS request. 
        type: number
        format: integer
        minimum: 0 

  GeoReplication:
    type: object
    properties:
      Status:
        description: The status of the secondary location
        $inc: '#/definitions/GeoReplication'
      LastSyncTime:
        description: A GMT date/time value, to the second. All primary writes preceding this value are guaranteed to be available for read operations at the secondary. Primary writes after this point in time may or may not be available for reads.
        type: string
        format: date-time

  Logging:
    description: Azure Analytics Logging settings.
    type: object      
    required: 
      - Version
      - Delete
      - Read
      - Write
      - RetentionPolicy
    properties:
      Version:
        description: The version of Storage Analytics to configure.
        type: string
      Delete:
        description: Indicates whether all delete requests should be logged.
        type: boolean
      Read:
        description: Indicates whether all read requests should be logged.
        type: boolean
      Write:
        description: Indicates whether all write requests should be logged.
        type: boolean
      RetentionPolicy:
        $ref: "#/definitions/RetentionPolicy"

  Metrics:
    description:
    properties:
      Version:
        description:  The version of Storage Analytics to configure.
        type: string
      Enabled:
        description:  Indicates whether metrics are enabled for the Blob service.
        type: boolean
      IncludeAPIs:
        description: Indicates whether metrics should generate summary statistics for called API operations.
        type: boolean
      RetentionPolicy:
        $ref: "#/definitions/RetentionPolicy"

  RetentionPolicy:
    description: the reqtention policy
    type: object
    required:
      - Enabled
    properties:
      Enabled:
        description:  Indicates whether a retention policy is enabled for the storage service
        type: boolean
      Days:
        description: Indicates the number of days that metrics or logging data should be retained. All data older than this value will be deleted
        type: number
        format: integer
        minimum: 1
        maximim: 365

  StorageServiceProperties:
    description: Storage Service Properties.
    type: object
    properties:
      Logging:
        description: Azure Analytics Logging settings
        $ref: '#/definitions/Logging'
      HourMetrics:
        description: A summary of request statistics grouped by API in hourly aggregates for blobs
        $ref: "#/definitions/Metrics"
      MinuteMetrics:
         description: a summary of request statistics grouped by API in minute aggregates for blobs
        $ref: "#/definitions/Metrics"
      Cors:
        description: The set of CORS rules.
        type: array
        items: {
          $ref : "#/definitions/CorsRule"
        }
      DefaultServiceVersion:
        description: The default version to use for requests to the Blob service if an incoming request’s version is not specified. Possible values include version 2008-10-27 and all more recent versions
        type: string

  StorageServiceStats:
    description: Stats for the storage service.
      type: object
      properties:
        GeoReplication:
          description: Geo-Replication information for the Secondary Storage Service
          $ref: "#/definitions/GeoReplication"

  PageWrite:
    type: string
    enum:
      - update
      - clear
    x-ms-enum:
      name: PageWrite
      modelAsString: false
      
parameters:
  # Meta-Parameters (via x-ms-paths) ========================================================================
  _QueryComp:
    name: comp
    in: query
    required: true
    type: string

   _ResType:
    name: restype
    in: query
    required: true
    type: string

  # Parameters  ========================================================================
  ApiVersionParameter:
    name: x-ms-version
    x-ms-client-name: version
    in: header
    required: false
    type: string
    x-ms-parameter-location: client
    enum:
    - '2015-04-05'
    - '2014-02-14'
    - '2013-08-15'
    - '2012-02-12'
    - '2011-08-18'
    - '2009-09-19'
    - '2009-07-17'
    - '2009-04-14'
    default: '2015-04-05'
    description: Specifies the version of the operation to use for this request.

  Blob:
    name: blob
    in: path
    required: true
    type: string
    x-ms-parameter-location: method
    description: The blob name.

  BlobCacheControl:
    name: x-ms-blob-cache-control
    in: header
    required: false
    type: string
    description: Optional. Sets the blob’s cache control. If specified, this property
      is stored with the blob and returned with a read request.

  BlobConditionAppendPos:
    name: x-ms-blob-condition-appendpos
    x-ms-client-name: appendPosition
    in: header
    required: false
    type: integer
    x-ms-parameter-location: method
    description: Optional conditional header, used only for the Append Block operation. A number indicating the byte offset to compare. Append Block will succeed only if the append position is equal to this number. If it is not, the request will fail with the AppendPositionConditionNotMet error (HTTP status code 412 – Precondition Failed).

  BlobConditionMaxSize:
    name: x-ms-blob-condition-maxsize
    x-ms-client-name: maxSize
    in: header
    required: false
    type: integer
    x-ms-parameter-location: method
    description: Optional conditional header. The max length in bytes permitted for the append blob. If the Append Block operation would cause the blob to exceed that limit or if the blob size is already greater than the value specified in this header, the request will fail with MaxBlobSizeConditionNotMet error (HTTP status code 412 – Precondition Failed).
  
  BlobPublicAccess:
    name: x-ms-blob-public-access
    x-ms-client-name: access
    in: header
    required: false
    $inc: '#/definitions/BlobPublicAccessType'
    x-ms-parameter-location: method
    description: Specifies whether data in the container may be accessed publicly and the level of access

  BlobContentDisposition:
    name: x-ms-blob-content-disposition
    in: header
    required: false
    type: string
    description: Optional. Sets the blob’s Content-Disposition header.
    
  BlobContentEncoding:
    name: x-ms-blob-content-encoding
    in: header
    required: false
    type: string
    description: Optional. Sets the blob’s content encoding. If specified, this
      property is stored with the blob and returned with a read request.
    
  BlobContentLanguage:
    name: x-ms-blob-content-language
    in: header
    required: false
    type: string
    description: Optional. Set the blob’s content language. If specified, this
      property is stored with the blob and returned with a read request.
    
  BlobContentMD5:
    name: x-ms-blob-content-md5
    in: header
    required: false
    type: string
    description: Optional. An MD5 hash of the blob content. Note that this hash
      is not validated, as the hashes for the individual blocks were validated
      when each was uploaded.

  BlobContentType:
    name: x-ms-blob-content-type
    in: header
    required: false
    type: string
    description: Optional. Sets the blob’s content type. If specified, this property
      is stored with the blob and returned with a read request.

  BlobType:
    name: x-ms-blob-type
    x-ms-client-name: blobType
    in: header
    required: false
    default: BlockBlob
    $inc: '#/definitions/BlobType'
    x-ms-parameter-location: method
    description: 'Specifies the type of blob to create: block blob, page blob, or
      append blob.'
  
  Body:
    name: body
    in: body
    required: true
    schema:
      type: file
    x-ms-parameter-location: method
    description: Initial data for the blob, empty for page and append blobs

  BlockId:
    name: blockid
    x-ms-client-name: blockId
    in: query
    required: true
    x-ms-parameter-location: method
    description: A valid Base64 string value that identifies the block. Prior to encoding, the string must be less than or equal to 64 bytes in size.
      For a given blob, the length of the value specified for the blockid parameter must be the same size for each block.

  BlockListType:
    name: blocklisttype
    x-ms-client-name: listType
    in: query
    required: false
    default: committed
    $inc: '#/definitions/BlockListType'
    x-ms-parameter-location: method
    description: 'Specifies whether to return the list of committed blocks, the list of uncommitted blocks, or both lists together.'

  ContentType:
    name: Content-Type
    x-ms-client-name: contentType
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: Specifies the content type of a blob.
  
  CopyActionAbort:
    name: x-ms-copy-action
    x-ms-client-name: copyActionAbortConstant
    in: header
    required: true
    type: string
    enum:
      - abort
    x-ms-parameter-location: method

  CopyId:
    name: copyid
    x-ms-client-name: copyId
    in: query
    required: true
    type: string
    x-ms-parameter-location: method
    description: The copy identifier provided in the x-ms-copy-id header of the original Copy Blob operation.

  ClientRequestId:
    name: x-ms-client-request-id
    x-ms-client-name: requestId
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: Provides a client-generated, opaque value with a 1 KB character limit
      that is recorded in the analytics logs when storage analytics logging is enabled.

  Container:
    name: container
    in: path
    required: true
    type: string
    x-ms-parameter-location: method
    description: The container name.

  ContentLength:
    name: Content-Length
    x-ms-client-name: contentLength
    in: header
    required: true
    type: integer
    x-ms-parameter-location: method
    description: Specifies the number of bytes being transmitted in the request body. When the x-ms-page-write header is set to clear, the value of this header must be set to zero.

  ContentMD5:
    name: Content-MD5
    x-ms-client-name: contentMD5
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: An MD5 hash of the page content. This hash is used to verify the integrity of the page during transport. When this header is specified, the storage service compares the hash of the content that has arrived with the header value that was sent. If the two hashes do not match, the operation will fail with error code 400 (Bad Request). 
      The Content-MD5 header is not permitted when the x-ms-page-write header is set to clear. If it is included with the request, the Blob service returns status code 400 (Bad Request).

  CopySource:
    name: x-ms-copy-source
    x-ms-client-name: copySource
    in: header
    required: true
    type: string
    x-ms-parameter-location: method
    description: Specifies the name of the source page blob snapshot. This value is a URL of up to 2 KB in length that specifies a page blob snapshot. The value should be URL-encoded as it would appear in a request URI. The source blob must either be public or must be authenticated via a shared access signature.

  DeleteSnapshots:
    name: x-ms-delete-snapshots
    x-ms-client-name: deleteSnapshots
    description: 'Required if the blob has associated snapshots. Specify one of
      the following two options: include: Delete the base blob and all of its
      snapshots. only: Delete only the blob''s snapshots and not the blob itself'
    $inc: "#/definitions/DeleteSnapshots"
    x-ms-parameter-location: method
    in: header
    required: false

  GetRangeContentMD5:
    name: x-ms-range-get-content-md5
    in: header
    required: false
    type: boolean
    x-ms-parameter-location: method
    description: When set to true and specified together with the Range, the service returns the MD5 hash for the range, as long as the range is less than or equal to 4 MB in size.
  
  IfMatch:
    name: If-Match
    x-ms-client-name: ifMatches
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: Specify an ETag value to operate only on blobs with a matching value.

  IfModifiedSince:
    name: If-Modified-Since
    x-ms-client-name: ifModifiedSince
    in: header
    required: false
    type: string
    format: date-time
    x-ms-parameter-location: method
    description: Specify this header value to operate only on a blob if it has been modified since the specified date/time.

  IfNoneMatch:
    name: If-None-Match
    x-ms-client-name: ifNoneMatch
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: Specify an ETag value to operate only on blobs without a matching value.

  IfUnmodifiedSince:
    name: If-Unmodified-Since
    x-ms-client-name: ifUnmodifiedSince
    in: header
    required: false
    type: string
    format: date-time
    x-ms-parameter-location: method
    description: Specify this header value to operate only on a blob if it has not been modified since the specified date/time.

  IfSequenceNumberEqualTo:
    name: x-ms-if-sequence-number-eq
    x-ms-client-name: ifSequenceNumberEqualTo
    in: header
    required: false
    type: integer

  IfSequenceNumberLessThan:
    name: x-ms-if-sequence-number-lt
    x-ms-client-name: ifSequenceNumberLessThan
    in: header
    required: false
    type: integer

  IfSequenceNumberLessThanOrEqualTo:
    name: x-ms-if-sequence-number-le
    x-ms-client-name: ifSequenceNumberLessThanOrEqualTo
    in: header
    required: false
    type: integer

  Include:
    name: include
    in: query
    required: false
    type: string
    enum: 
      - metadata
    description: Include this parameter to specify that the container's metadata be returned as part of the response body.

  LeaseAction:
    name: x-ms-lease-action
    x-ms-client-name: action
    in: header
    required: true
    type: string
    enum:
    - acquire
    - renew
    - change
    - release
    - break
    description: Describes what lease action to take.

  LeaseId:
    name: x-ms-lease-id
    x-ms-client-name: leaseId
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: If specified, the operation only succeeds if the container’s lease
      is active and matches this ID.

  Marker: 
    name: marker
    in: query
    required: false
    type: string
    description:  A string value that identifies the portion of the list of containers to be returned with the next listing operation. The operation returns the NextMarker value within the response body if the listing operation did not return all containers remaining to be listed with the current page. The NextMarker value can be used as the value for the marker parameter in a subsequent call to request the next page of list items. The marker value is opaque to the client.
    x-ms-parameter-location: method

  MaxResults:
    name: maxresults
    in: query
    required: false
    type: number
    format: integer
    minimum: 0 
    maximum: 5000
    description: Specifies the maximum number of containers to return. If the request does not specify maxresults, or specifies a value greater than 5000, the server will return up to 5000 items. Note that if the listing operation crosses a partition boundary, then the service will return a continuation token for retrieving the remainder of the results. For this reason, it is possible that the service will return fewer results than specified by maxresults, or than the default of 5000. 

  Metadata:
    name: x-ms-meta
    in: query
    required: false
    type: number
    format: integer
    minimum: 0
    x-ms-parameter-location: method
    description: Optional. Specifies a user-defined name-value pair associated with the blob. If no name-value pairs are specified, the operation will copy the metadata from the source blob or file to the destination blob. If one or more name-value pairs are specified, the destination blob is created with the specified metadata, and metadata is not copied from the source blob or file. 
      Note that beginning with version 2009-09-19, metadata names must adhere to the naming rules for C# identifiers. See Naming and Referencing Containers, Blobs, and Metadata for more information.
    x-ms-header-collection-prefix: x-ms-meta-

  Origin:
    name: Origin
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: Specifies the origin from which the request is issued. The presence of this header results in cross-origin resource sharing (CORS) headers on the response.

  PageWrite:
    name: x-ms-page-write
    x-ms-client-name: pageWrite
    in: header
    required: true
    $inc: "#/definitions/PageWrite"
    description: |-
      Required. You may specify one of the following options:
        - Update: Writes the bytes specified by the request body into the specified range. The Range and Content-Length headers must match to perform the update.
        - Clear: Clears the specified range and releases the space used in storage for that range. To clear a range, set the Content-Length header to zero, and the Range header to a value that indicates the range to clear, up to maximum blob size.

  Prefix:
    name: prefix
    in: query
    required: false
    type: string
    description: Filters the results to return only containers whose name begins with the specified prefix.
    x-ms-parameter-location: method

  PrevSnapshot:
    name: prevsnapshot
    in: query
    required: false
    type: string
    format: date-time
    x-ms-parameter-location: method
    description:  Optional in version 2015-07-08 and newer. The prevsnapshot parameter is a DateTime value that specifies that the response will contain only pages that were changed between target blob and previous snapshot. Changed pages include both updated and cleared pages. The target blob may be a snapshot, as long as the snapshot specified by prevsnapshot is the older of the two. Note that incremental snapshots are currently supported only for blobs created on or after January 1, 2016.

  Range:
    name: x-ms-range
    x-ms-client-name: range
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: Return only the bytes of the blob in the specified range.

  Snapshot:
    name: snapshot
    in: query
    required: false
    type: string
    format: date-time
    x-ms-parameter-location: method
    description:  The snapshot parameter is an opaque DateTime value that, when present, 
      specifies the blob snapshot to retrieve. For more information on working with blob
      snapshots, see <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/creating-a-snapshot-of-a-blob">Creating a Snapshot of a Blob.</a>

  SourceIfMatch:
    name: x-ms-source-if-match
    x-ms-client-name: sourceIfMatches
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: Specify an ETag value to operate only on blobs with a matching value.

  SourceIfModifiedSince:
    name: x-ms-source-if-modified-since
    x-ms-client-name: sourceIfModifiedSince
    in: header
    required: false
    type: string
    format: date-time
    x-ms-parameter-location: method
    description: Specify this header value to operate only on a blob if it has been modified since the specified date/time.

  SourceIfNoneMatch:
    name: x-ms-source-if-none-match
    x-ms-client-name: sourceIfNoneMatch
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: Specify an ETag value to operate only on blobs without a matching value.

  SourceIfUnmodifiedSince:
    name: x-ms-source-if-unmodified-since
    x-ms-client-name: sourceIfUnmodifiedSince
    in: header
    required: false
    type: string
    format: date-time
    x-ms-parameter-location: method
    description: Specify this header value to operate only on a blob if it has not been modified since the specified date/time.

  SourceLeaseId:
    name: x-ms-source-lease-id
    x-ms-client-name: sourceLeaseId
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: Specify this header to perform the operation only if the lease ID given matches the active lease ID of the source blob.

  StorageServiceProperties:
    name: StorageServiceProperties
    in: body
    required: true
    schema: 
      $ref: StorageServiceProperties
    x-ms-parameter-location: method
    description: The StorageService properties.

  Timeout:
    name: timeout
    in: query
    required: false
    type: number
    format: integer
    minimum: 0
    x-ms-parameter-location: method
    description: The timeout parameter is expressed in seconds. 
      For more information, see <a href="https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/setting-timeouts-for-blob-service-operations">Setting Timeouts for Blob Service Operations.</a>

responses:
  Error:
    description: Error.
    schema:
      $ref: "#/definitions/BlobError"
headers:
  Access-Control-Allow-Credentials: 
    type: boolean
    description: Returned if the request includes an Origin header and CORS is enabled with a matching rule that doesn’t allow all origins. This header will be set to true.
  Access-Control-Allow-Origin: 
    type: string
    description: Returned if the request includes an Origin header and CORS is enabled with a matching rule. This header returns the value of the origin request header in case of a match
  Access-Control-Expose-Headers: 
    type: string
    description: Returned if the request includes an Origin header and CORS is enabled with a matching rule. Returns the list of response headers that are to be exposed to the client or issuer of the request
  Accept-Ranges: 
    type: string
    description: Indicates that the service supports requests for partial blob content.
  Cache-Control: 
    type: string
    description: This header is returned if it was previously specified for the blob.
  Content-Disposition: 
    type: string
    description: This header returns the value that was specified for the 'x-ms-blob-content-disposition' header. The Content-Disposition response header field conveys additional information about how to process the response payload, and also can be used to attach additional metadata. For example, if set to attachment, it indicates that the user-agent should not display the response, but instead show a Save As dialog with a filename other than the blob name specified.
  Content-Encoding: 
    type: string
    description: This header returns the value that was specified for the Content-Encoding request header
  Content-Language: 
    type: string
    description: This header returns the value that was specified for the Content-Language request header. 
  Content-Length: 
    type: integer
    description: The number of bytes present in the response body.
  Content-MD5: 
    type: string
    description: If the blob has an MD5 hash and this operation is to read the full blob, this response header is returned so that the client can check for message content integrity.
  Content-Range: 
    type: string
    description: Indicates the range of bytes returned in the event that the client requested a subset of the blob by setting the 'Range' request header.
  Content-Type: 
    type: string
    description: The content type specified for the blob. The default content type is 'application/octet-stream'
  Date: 
    type: string
    format: date-time
    description: UTC date/time value generated by the service that indicates the time at which the response was initiated
  ETag: 
    type: string
    description: The ETag contains a value that you can use to perform operations conditionally.
      If the request version is 2011-08-18 or newer, the ETag value will be in quotes.
  Last-Modified:
    type: string
    description: Returns the date and time the container was last modified. 
      Any operation that modifies the blob, including an update of the blob's 
      metadata or properties, changes the last-modified time of the blob.
  Vary: 
    type: string
    description: Returned with the value of the Origin header when CORS rules are specified
  x-ms-blob-append-offset:
    x-ms-client-name: BlobAppendOffset
    type: string
    description: This response header is returned only for append operations. It returns the offset at which the block was committed, in bytes.
  x-ms-blob-committed-block-count: 
    x-ms-client-name: BlobCommittedBlockCount
    type: string
    description: The number of committed blocks present in the blob. This header is returned only for append blobs.
  x-ms-blob-content-length:
    x-ms-client-name: BlobContentLength
    type: integer
    description: The size of the blob in bytes.
  x-ms-blob-content-md5: 
    x-ms-client-name: BlobContentMD5
    type: string
    description: If the blob has a MD5 hash, and if request contains range header (Range or x-ms-range), this response header is returned with the value of the whole blob’s MD5 value. This value may or may not be equal to the value returned in Content-MD5 header, with the latter calculated from the requested range
  x-ms-blob-sequence-number: 
    x-ms-client-name: BlobSequenceNumber
    type: string
    description: The current sequence number for a page blob. This header is not returned for block blobs or append blobs
  x-ms-blob-type: 
    x-ms-client-name: BlobType
    $inc: "#/definitions/BlobType"
    description: The blob's type. 
  x-ms-copy-completion-time: 
    x-ms-client-name: CopyCompletionTime
    type: string
    format: date-time
    description:  Conclusion time of the last attempted Copy Blob operation where this blob was the destination blob. This value can specify the time of a completed, aborted, or failed copy attempt. This header does not appear if a copy is pending, if this blob has never been the destination in a Copy Blob operation, or if this blob has been modified after a concluded Copy Blob operation using Set Blob Properties, Put Blob, or Put Block List.
  x-ms-copy-id: 
    x-ms-client-name: CopyId
    type: string
    description: String identifier for this copy operation. Use with Get Blob Properties to check the status of this copy operation, or pass to Abort Copy Blob to abort a pending copy.
  x-ms-copy-progress: 
    x-ms-client-name: CopyProgress
    type: string
    description: Contains the number of bytes copied and the total bytes in the source in the last attempted Copy Blob operation where this blob was the destination blob. Can show between 0 and Content-Length bytes copied. This header does not appear if this blob has never been the destination in a Copy Blob operation, or if this blob has been modified after a concluded Copy Blob operation using Set Blob Properties, Put Blob, or Put Block List
  x-ms-copy-source: 
    x-ms-client-name: CopySource
    type: string
    description:  URL up to 2 KB in length that specifies the source blob or file used in the last attempted Copy Blob operation where this blob was the destination blob. This header does not appear if this blob has never been the destination in a Copy Blob operation, or if this blob has been modified after a concluded Copy Blob operation using Set Blob Properties, Put Blob, or Put Block List.
  x-ms-copy-status: 
    x-ms-client-name: CopyStatus
    description: State of the copy operation identified by x-ms-copy-id. 
    $inc: "#/definitions/CopyStatus"
  x-ms-copy-status-description: 
    x-ms-client-name: CopyStatusDescription
    type: string
    description: Only appears when x-ms-copy-status is failed or pending. Describes the cause of the last fatal or non-fatal copy operation failure. This header does not appear if this blob has never been the destination in a Copy Blob operation, or if this blob has been modified after a concluded Copy Blob operation using Set Blob Properties, Put Blob, or Put Block List
  x-ms-incremental-copy:
    x-ms-client-name: IsIncrementalCopy
    type: boolean
    description:  Included if the blob is incremental copy blob.
  x-ms-lease-duration: 
    x-ms-client-name: LeaseDuration
    $inc: "#/definitions/LeaseDuration"
    description: When a blob is leased, specifies whether the lease is of infinite or fixed duration.
  x-ms-lease-state: 
    x-ms-client-name: LeaseState
    $inc: "#/definitions/LeaseState"
    description: Lease state of the blob.
  x-ms-lease-status: 
    x-ms-client-name: LeaseStatus
    $inc: "#/definitions/LeaseStatus"
    description: The current lease status of the blob.
  x-ms-meta: # ie, supports x-ms-meta-*:value
    type: string
    x-ms-client-name: Metadata
    x-ms-header-collection-prefix: x-ms-meta-
  x-ms-request-id:
    x-ms-client-name: RequestId
    type: string
    description: This header uniquely identifies the request that was made
      and can be used for troubleshooting the request.  
  x-ms-request-server-encrypted:
    x-ms-client-name: IsServerEncrypted
    type: boolean
    description: The value of this header is set to true if the contents of the request are successfully encrypted using the specified algorithm, and false otherwise.
  x-ms-server-encrypted: 
    x-ms-client-name: IsServerEncrypted
    type: boolean
    description: The value of this header is set to true if the blob data and application metadata are completely encrypted using the specified algorithm. Otherwise, the value is set to false (when the blob is unencrypted, or if only parts of the blob/application metadata are encrypted).
  x-ms-version:
    x-ms-client-name: Version
    type: string
    description: Indicates the version of the Blob service used to execute
      the request. This header is returned for requests made against version
      2009-09-19 and above. 

x-original-definitions:
  BlobError:
    description: Represents an error message returned from the Azure Blob service.
    type: object
    xml:
      name: Error
    properties:
      code:
        type: string
        xml:
          name: Code
      message:
        type: string
        xml:
          name: Message
  RetentionPolicy:
    type: object
    xml:
      name: RetentionPolicy
    properties:
      Enabled:
        type: boolean
        xml:
          name: Enabled
      Days:
        type: integer
        xml:
          name: Days
  Metrics:
    properties:
      Version:
        type: string
        xml:
          name: Version
      Enabled:
        type: boolean
        xml:
          name: Enabled
      IncludeAPIs:
        type: boolean
        xml:
          name: IncludeAPIs
      RetentionPolicy:
        type: object
        $ref: "#/definitions/RetentionPolicy"
        xml:
          name: RetentionPolicy

  LeaseStatus:
    type: string
    enum:
    - locked
    - unlocked
    x-ms-enum:
      name: LeaseStatus
      modelAsString: false
  LeaseState:
    type: string
    enum:
    - available
    - leased
    - expired
    - breaking
    - " broken"
    x-ms-enum:
      name: LeaseState2
      modelAsString: false
  LeaseDuration:
    type: string
    enum:
    - infinite
    - fixed
    x-ms-enum:
      name: LeaseDuration2
      modelAsString: false
  ContainerProperties:
    type: object
    properties:
      Etag:
        type: string
      Last-Modified:
        type: string
        format: date-time
      LeaseStatus:
        $ref: "#/definitions/LeaseStatus"
      LeaseState:
        $ref: "#/definitions/LeaseState"
      LeaseDuration:
        $ref: "#/definitions/LeaseDuration"
  Container:
    type: object
    properties:
      Name:
        type: string
      Properties:
        $ref: "#/definitions/ContainerProperties"
      Metadata:
        type: object
        additionalProperties: {}
  ContainerEnumerationResults:
    type: object
    properties:
      ServiceEndpoint:
        type: string
        xml:
          attribute: true
      Prefix:
        type: string
      Marker:
        type: string
      MaxResults:
        type: integer
      Containers:
        type: array
        items:
          $ref: "#/definitions/Container"
      NextMarker:
        type: string
  BlobProperties:
    type: object
    properties:
      Etag:
        type: string
      Last-Modified:
        type: string
        format: date-time
      Content-Length:
        type: integer
      Content-Type:
        type: string
      Content-Encoding:
        type: string
      Content-Language:
        type: string
      Content-MD5:
        type: string
      Cache-Control:
        type: string
      x-ms-blob-sequence-number:
        type: integer
        x-ms-client-name: sequenceNumber
      BlobType:
        type: string
        enum:
        - BlockBlob
        - PageBlob
        - AppendBlob
      LeaseStatus:
        $ref: "#/definitions/LeaseStatus"
      LeaseState:
        $ref: "#/definitions/LeaseState"
      LeaseDuration:
        $ref: "#/definitions/LeaseDuration"
      CopyId:
        type: integer
      CopyStatus:
        type: string
        enum:
        - pending
        - success
        - aborted
        - failed
      CopySource:
        type: string
      CopyProgress:
        type: integer
      CopyCompletionTime:
        type: string
        format: date-time
      CopyStatusDescription:
        type: string
      ServerEncrypted:
        type: boolean
  Blob:
    type: object
    properties:
      Name:
        type: string
      Snapshot:
        type: string
      Properties:
        $ref: "#/definitions/BlobProperties"
      Metadata:
        type: object
        additionalProperties: {}
  BlobEnumerationResults:
    type: object
    properties:
      ServiceEndpoint:
        type: string
        xml:
          attribute: true
      ContainerName:
        type: string
        xml:
          attribute: true
      Prefix:
        type: string
      Marker:
        type: string
      Delimiter:
        type: string
      MaxResults:
        type: integer
      Blobs:
        type: array
        items:
          $ref: "#/definitions/Blob"
      BlobPrefix:
        type: object
        schema:
          properties:
            Name:
              type: string
      NextMarker:
        type: string

x-ms-paths-original:
  "/?restype=service&comp=properties":
    get:
      tags:
      - service
      operationId: Service_GetServiceProperties
      parameters:
      - name: restype
        in: query
        required: true
        type: string
        enum:
        - service
      - name: comp
        in: query
        required: true
        type: string
        enum:
        - properties
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '200':
          description: Success.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
          schema:
            $ref: "#/definitions/ServiceProperties"
        default:
          $ref: "#/responses/Error"
  "/?restype=service&comp=stats":
    get:
      tags:
      - service
      operationId: Service_GetServiceStats
      parameters:
      - name: restype
        in: query
        required: true
        type: string
        enum:
        - service
      - name: comp
        in: query
        required: true
        type: string
        enum:
        - stats
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '200':
          description: Success.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
          schema:
            $ref: "#/definitions/ServiceStats"
        default:
          $ref: "#/responses/Error"
  
  "/{container}?restype=container":
    get:
      tags:
      - containers
      operationId: Containers_GetProperties
      parameters:
      - name: restype
        in: query
        required: true
        type: string
        enum:
        - container
      - $ref: "#/parameters/Container"
      - name: x-ms-lease-id
        in: header
        required: false
        type: string
        description: If specified, the operation only succeeds if the container’s
          lease is active and matches this ID.
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '200':
          description: Success.
          headers:
            ETag:
              type: string
              description: The entity tag for the container.
            Last-Modified:
              type: string
              description: Returns the date and time the container was last modified.
            x-ms-lease-status:
              type: string
              description: Lease status of the container.
            x-ms-lease-state:
              type: string
              description: Lease state of the container.
            x-ms-lease-duration:
              type: string
              description: Specifies whether the lease on a container is of infinite
                or fixed duration
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
        default:
          $ref: "#/responses/Error"
    head:
      tags:
      - containers
      operationId: Containers_Exists
      parameters:
      - name: restype
        in: query
        required: true
        type: string
        enum:
        - container
      - $ref: "#/parameters/Container"
      - name: x-ms-lease-id
        in: header
        required: false
        type: string
        description: If specified, the operation only succeeds if the container’s
          lease is active and matches this ID.
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '200':
          description: The container exists.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
          x-ms-response-value:
            type: boolean
            value: true
        '404':
          description: The container does not exist
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
          x-ms-response-value:
            type: boolean
            value: false
    put:
      tags:
      - containers
      operationId: Containers_Create
      parameters:
      - name: restype
        in: query
        required: true
        type: string
        enum:
        - container
      - $ref: "#/parameters/Container"
      - name: x-ms-blob-public-access
        in: header
        required: false
        type: string
        enum:
        - container
        - blob
        description: Specifies whether data in the container may be accessed publicly
          and the level of access.
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '201':
          description: Success.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
        default:
          $ref: "#/responses/Error"
    delete:
      tags:
      - containers
      operationId: Containers_Remove
      parameters:
      - name: restype
        in: query
        required: true
        type: string
        enum:
        - container
      - $ref: "#/parameters/Container"
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '202':
          description: Success.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
        default:
          $ref: "#/responses/Error"
  "/{container}?restype=container&comp=list":
    get:
      tags:
      - containers
      operationId: Containers_ListBlobs
      parameters:
      - name: restype
        in: query
        required: true
        type: string
        enum:
        - container
      - name: comp
        in: query
        required: true
        type: string
        enum:
        - list
      - $ref: "#/parameters/Container"
      - name: prefix
        in: query
        required: false
        type: string
        description: Filters the results to return only containers whose name begins
          with the specified prefix.
      - name: delimiter
        in: query
        required: false
        type: string
        description: Optional. When the request includes this parameter, the operation
          returns a BlobPrefix element in the response body that acts as a placeholder
          for all blobs whose names begin with the same substring up to the appearance
          of the delimiter character. The delimiter may be a single character or a
          string.
      - name: marker
        in: query
        required: false
        type: string
        description: A string value that identifies the portion of the list to be
          returned with the next list operation.
      - name: maxresults
        in: query
        required: false
        type: integer
        description: Specifies the maximum number of containers to return.
      - name: include
        in: query
        required: false
        type: string
        enum:
        - snapshots
        - metadata
        - uncommittedblobs
        - copy
        description: 'Optional. Specifies one or more datasets to include in the response:
          - snapshots: Specifies that snapshots should be included in the enumeration.
          Snapshots are listed from oldest to newest in the response. - metadata:
          Specifies that blob metadata be returned in the response. - uncommittedblobs:
          Specifies that blobs for which blocks have been uploaded, but which have
          not been committed using Put Block List, be included in the response. -
          copy: Version 2012-02-12 and newer. Specifies that metadata related to any
          current or previous Copy Blob operation should be included in the response.'
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '201':
          description: Success.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
          schema:
            $ref: "#/definitions/BlobEnumerationResults"
        default:
          $ref: "#/responses/Error"
  "/{container}?restype=container&comp=metadata":
    put:
      tags:
      - containers
      operationId: Containers_SetMetadata
      parameters:
      - name: restype
        in: query
        required: true
        type: string
        enum:
        - container
      - name: comp
        in: query
        required: true
        type: string
        enum:
        - metadata
      - $ref: "#/parameters/Container"
      - name: metadata
        in: header
        required: true
        type: string
        x-ms-header-collection-prefix: x-ms-meta-
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '201':
          description: Success.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
        default:
          $ref: "#/responses/Error"
    get:
      tags:
      - containers
      operationId: Containers_GetMetadata
      parameters:
      - name: restype
        in: query
        required: true
        type: string
        enum:
        - container
      - name: comp
        in: query
        required: true
        type: string
        enum:
        - metadata
      - $ref: "#/parameters/Container"
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '201':
          description: Success.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
            metadata:
              type: string
              x-ms-header-collection-prefix: x-ms-meta-
        default:
          $ref: "#/responses/Error"
  "/{container}?restype=container&comp=lease":
    put:
      tags:
      - containers
      operationId: Containers_Lease
      parameters:
      - name: comp
        in: query
        required: true
        type: string
        enum:
        - lease
      - $ref: "#/parameters/Container"
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/LeaseAction"
      - $ref: "#/parameters/LeaseBreakPeriod"
      - $ref: "#/parameters/LeaseDuration"
      - $ref: "#/parameters/ProposedLeaseId"
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '200':
          description: The lease operation was accepted.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
            x-ms-lease-id:
              type: string
              description: When you request a lease, the Blob service returns a unique
                lease ID. While the lease is active, you must include the lease ID
                with any request to delete the container, or to renew, change, or
                release the lease. A successful renew operation also returns the lease
                ID for the active lease.
            x-ms-lease-time:
              type: integer
              description: Approximate time remaining in the lease period, in seconds.
                This header is returned only for a successful request to break the
                lease. If the break is immediate, 0 is returned.
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?fakeparameter=block":
    put:
      tags:
      - blockblobs
      operationId: BlockBlobs_Creat
      description: Creates a blob from the contents of the request, or copied from
        an existing blob.
      consumes:
      - application/octet-stream
      parameters:
      - $ref: "#/parameters/Container"
      - $ref: "#/parameters/Blob"
      - name: x-ms-blob-type
        in: header
        required: true
        type: string
        default: BlockBlob
        enum:
        - BlockBlob
      - $ref: "#/parameters/ContentType"
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/CopySource"
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      - $ref: "#/parameters/Body"
      responses:
        '201':
          description: The blob was created.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?fakeparameter=page":
    put:
      tags:
      - pageblobs
      operationId: PageBlobs_Create
      description: Creates an empty page blob, or copies from an existing blob identified
        by the source argument.
      parameters:
      - $ref: "#/parameters/Container"
      - $ref: "#/parameters/Blob"
      - name: x-ms-blob-type
        in: header
        required: true
        type: string
        default: PageBlob
        enum:
        - PageBlob
      - $ref: "#/parameters/ContentType"
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/CopySource"
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      - $ref: "#/parameters/Body"
      responses:
        '201':
          description: The blob was created.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?fakeparameter=append":
    put:
      tags:
      - appendblobs
      operationId: AppendBlobs_Create
      description: Creates an empty append blob, or copies from an existing blob identified
        by the source argument.
      parameters:
      - $ref: "#/parameters/Container"
      - $ref: "#/parameters/Blob"
      - name: x-ms-blob-type
        in: header
        required: true
        type: string
        default: AppendBlob
        enum:
        - AppendBlob
      - $ref: "#/parameters/ContentType"
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/CopySource"
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      - $ref: "#/parameters/Body"
      responses:
        '201':
          description: The blob was created.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?comp=pagelist":
    get:
      tags:
      - blobs
      operationId: Blobs_ListPages
      parameters:
      - name: comp
        in: query
        required: true
        type: string
        enum:
        - pagelist
      - $ref: "#/parameters/Container"
      - $ref: "#/parameters/Blob"
      - $ref: "#/parameters/Range"
      - $ref: "#/parameters/Snapshot"
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '200':
          description: Information on the page blob was found.
          headers:
            x-ms-blob-content-length:
              type: integer
              description: The size of the blob in bytes.
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
          schema:
            type: string
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?comp=appendblock":
    put:
      tags:
      - blobs
      operationId: Blobs_AppendBlock
      parameters:
      - name: comp
        in: query
        required: true
        type: string
        enum:
        - appendblock
      - $ref: "#/parameters/Container"
      - $ref: "#/parameters/Blob"
      - name: x-ms-blob-condition-maxsize
        x-ms-client-name: maxSize
        in: header
        required: false
        type: integer
        description: Optional. The max length in bytes permitted for the append blob.
          If the Append Block operation would cause the blob to exceed that limit
          or if the blob size is already greater than the value specified in this
          header, the request will fail with MaxBlobSizeConditionNotMet error (HTTP
          status code 412 – Precondition Failed).
      - name: x-ms-blob-condition-appendpos
        x-ms-client-name: appendPosition
        in: header
        required: false
        type: integer
        description: Optional. A number indicating the byte offset to compare. Append
          Block will succeed only if the append position is equal to this number.
          If it is not, the request will fail with the AppendPositionConditionNotMet
          error (HTTP status code 412 – Precondition Failed).
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      - $ref: "#/parameters/Body"
      responses:
        '201':
          description: The block was created.
          headers:
            x-ms-blob-append-offset:
              type: string
              description: This response header is returned only for append operations.
                It returns the offset at which the block was committed, in bytes.
            x-ms-blob-committed-block-count:
              type: string
              description: This response header is returned only for append operations.
                It returns the offset at which the block was committed, in bytes.
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
        default:
          $ref: "#/responses/Error"
  "/{container}/{blob}?comp=lease":
    put:
      tags:
      - blobs
      operationId: Blobs_Lease
      parameters:
      - name: comp
        in: query
        required: true
        type: string
        enum:
        - lease
      - $ref: "#/parameters/Container"
      - $ref: "#/parameters/Blob"
      - $ref: "#/parameters/LeaseId"
      - $ref: "#/parameters/LeaseAction"
      - $ref: "#/parameters/LeaseBreakPeriod"
      - $ref: "#/parameters/LeaseDuration"
      - $ref: "#/parameters/ProposedLeaseId"
      - $ref: "#/parameters/ApiVersionParameter"
      - $ref: "#/parameters/ClientRequestId"
      responses:
        '200':
          description: The lease operation was accepted.
          headers:
            x-ms-request-id:
              type: string
              description: This header uniquely identifies the request that was made
                and can be used for troubleshooting the request.
            x-ms-version:
              type: string
              description: Indicates the version of the Blob service used to execute
                the request. This header is returned for requests made against version
                2009-09-19 and above.
        default:
          $ref: "#/responses/Error"
  # "/?restype=service&comp=properties":
  #   get:
  #     tags:
  #     - service
  #     operationId: Service_GetServiceProperties
  #     parameters:
  #     - name: restype
  #       in: query
  #       required: true
  #       type: string
  #       enum:
  #       - service
  #     - name: comp
  #       in: query
  #       required: true
  #       type: string
  #       enum:
  #       - properties
  #     - $ref: "#/parameters/ApiVersionParameter"
  #     - $ref: "#/parameters/ClientRequestId"
  #     responses:
  #       '200':
  #         description: Success.
  #         headers:
  #           x-ms-request-id:
  #             type: string
  #             description: This header uniquely identifies the request that was made
  #               and can be used for troubleshooting the request.
  #           x-ms-version:
  #             type: string
  #             description: Indicates the version of the Blob service used to execute
  #               the request. This header is returned for requests made against version
  #               2009-09-19 and above.
  #         schema:
  #           $ref: "#/definitions/ServiceProperties"
  #       default:
  #         $ref: "#/responses/Error"


x-original-parameters:
  LeaseBreakPeriod:
    name: x-ms-lease-break-period
    x-ms-client-name: breakPeriod
    in: header
    required: false
    type: integer
    x-ms-parameter-location: method
    description: For a break operation, this is the proposed duration of seconds that
      the lease should continue before it is broken, between 0 and 60 seconds.
  LeaseDuration:
    name: x-ms-lease-duration
    x-ms-client-name: duration
    in: header
    required: false
    type: integer
    x-ms-parameter-location: method
    description: Specifies the duration of the lease, in seconds, or negative one
      (-1) for a lease that never expires.
  ProposedLeaseId:
    name: x-ms-proposed-lease-id
    x-ms-client-name: proposedId
    in: header
    required: false
    type: string
    x-ms-parameter-location: method
    description: Proposed lease ID, in a GUID string format.

  RequiredRange:
    name: x-ms-range
    x-ms-client-name: range
    in: header
    required: true
    type: string
    x-ms-parameter-location: method
    description: Specifies the range of bytes to be written as a page. Both the start
      and end of the range must be specified. This header is defined by the HTTP/1.1
      protocol specification. For a page update operation, the page range can be up
      to 4 MB in size. For a page clear operation, the page range can be up to the
      value of the blob's full size. Given that pages must be aligned with 512-byte
      boundaries, the start offset must be a modulus of 512 and the end offset must
      be a modulus of 512 – 1. Examples of valid byte ranges are 0-511, 512-1023 etc.


